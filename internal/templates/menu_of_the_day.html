{{define "content"}}

<div class="d-flex justify-content-between align-items-center mb-4">
    <div>
        <h1 class="h2">Menu du Jour pour {{ .restaurant.Name }}</h1>
        <p class="text-muted">{{ .current_date }}</p>
    </div>
    <a href="/admin/restaurants" class="btn btn-outline-secondary">Retour aux Restaurants</a>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="card">
            <div class="card-header">
                Plats du Jour
            </div>
            <div class="card-body">
                {{if .dishes}}
                <div class="list-group">
                    {{range .dishes}}
                    <div class="list-group-item list-group-item-action flex-column align-items-start">
                        <div class="d-flex w-100 justify-content-between">
                            <h5 class="mb-1">{{.Name}}</h5>
                            <small>{{.Price}} €</small>
                        </div>
                        <div class="d-flex align-items-center mt-2">
                            {{if .PhotoURL}}
                            <img src="{{.PhotoURL}}" alt="{{.Name}}" class="img-thumbnail me-3" style="width: 100px; height: auto;">
                            {{end}}
                            <div class="ms-auto">
                                <a href="/admin/dishes/edit/{{.ID}}" class="btn btn-warning btn-sm">Modifier</a>
                                <form action="/admin/dishes/delete/{{.ID}}?restaurant_id={{$.restaurant.ID}}" method="post" onsubmit="return confirm('Sûr ?');" class="d-inline">
                                    <button type="submit" class="btn btn-danger btn-sm">Supprimer</button>
                                </form>
                            </div>
                        </div>
                    </div>
                    {{end}}
                </div>
                {{else}}
                <p class="text-center">Aucun plat défini pour aujourd'hui.</p>
                {{end}}
            </div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                Ajouter un Plat
            </div>
            <div class="card-body">
                <form action="/admin/restaurants/{{ .restaurant.ID }}/menu" method="post">
                    <div class="mb-3">
                        <label for="Name" class="form-label">Nom du Plat</label>
                        <input type="text" class="form-control" id="Name" name="Name" required>
                    </div>
                    <div class="mb-3">
                        <label for="Price" class="form-label">Prix</label>
                        <input type="number" step="0.01" class="form-control" id="Price" name="Price" required>
                    </div>
                    <div class="mb-3">
                        <label for="PhotoURL" class="form-label">URL de la Photo</label>
                        <input type="url" class="form-control" id="PhotoURL" name="PhotoURL">
                    </div>
                    <button type="submit" class="btn btn-primary w-100">Ajouter au Menu</button>
                </form>
            </div>
        </div>
    </div>
</div>

{{end}}

{{template "layout.html" .}}
