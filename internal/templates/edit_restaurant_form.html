{{define "content"}}

<h1 class="h2 mb-4">Modifier le Restaurant: {{ .restaurant.Name }}</h1>

<div class="card mb-4">
    <div class="card-header">
        Détails du Restaurant
    </div>
    <div class="card-body">
        <form action="/admin/restaurants/edit/{{ .restaurant.ID }}" method="post">
            <div class="row g-3">
                <div class="col-md-6">
                    <label for="Name" class="form-label">Nom du Restaurant</label>
                    <input type="text" class="form-control" id="Name" name="Name" value="{{ .restaurant.Name }}" required>
                </div>
                <div class="col-md-6">
                    <label for="CuisineType" class="form-label">Type de Cuisine</label>
                    <input type="text" class="form-control" id="CuisineType" name="CuisineType" value="{{ .restaurant.CuisineType }}" required>
                </div>
                <div class="col-12">
                    <label for="Description" class="form-label">Description</label>
                    <textarea class="form-control" id="Description" name="Description" rows="3">{{ .restaurant.Description }}</textarea>
                </div>
                <div class="col-md-6">
                    <label for="Address" class="form-label">Adresse</label>
                    <input type="text" class="form-control" id="Address" name="Address" value="{{ .restaurant.Address }}" required>
                </div>
                <div class="col-md-6">
                    <label for="Phone" class="form-label">Téléphone</label>
                    <input type="tel" class="form-control" id="Phone" name="Phone" value="{{ .restaurant.Phone }}">
                </div>
                <div class="col-md-6">
                    <label for="Email" class="form-label">Email</label>
                    <input type="email" class="form-control" id="Email" name="Email" value="{{ .restaurant.Email }}" required>
                </div>
                <div class="col-md-6">
                    <label for="WebsiteURL" class="form-label">Site Web</label>
                    <input type="url" class="form-control" id="WebsiteURL" name="WebsiteURL" value="{{ .restaurant.WebsiteURL }}">
                </div>
                <div class="col-md-6">
                    <label for="LogoURL" class="form-label">URL du Logo</label>
                    <input type="url" class="form-control" id="LogoURL" name="LogoURL" value="{{ .restaurant.LogoURL }}">
                </div>
                <div class="col-md-6">
                    <label for="CoverPhotoURL" class="form-label">URL de la Photo de Couverture</label>
                    <input type="url" class="form-control" id="CoverPhotoURL" name="CoverPhotoURL" value="{{ .restaurant.CoverPhotoURL }}">
                </div>
                <div class="col-12">
                    <label for="GoogleMapsURL" class="form-label">URL Google Maps</label>
                    <input type="url" class="form-control" id="GoogleMapsURL" name="GoogleMapsURL" value="{{ .restaurant.GoogleMapsURL }}">
                </div>

                <div class="col-md-6">
                    <label for="AvgReservationDurationInMinutes" class="form-label">Durée moyenne de réservation (minutes)</label>
                    <input type="number" class="form-control" id="AvgReservationDurationInMinutes" name="AvgReservationDurationInMinutes" value="{{ .restaurant.AvgReservationDurationInMinutes }}" min="1">
                </div>
                <div class="col-md-6">
                    <label for="SlotIntervalInMinutes" class="form-label">Intervalle des créneaux (minutes)</label>
                    <input type="number" class="form-control" id="SlotIntervalInMinutes" name="SlotIntervalInMinutes" value="{{ .restaurant.SlotIntervalInMinutes }}" min="1">
                </div>

                <div class="col-12">
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="IsActive" name="IsActive" value="true" {{if .restaurant.IsActive}}checked{{end}}>
                        <label class="form-check-label" for="IsActive">Restaurant Actif</label>
                    </div>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="HasParking" name="HasParking" value="true" {{if .restaurant.HasParking}}checked{{end}}>
                        <label class="form-check-label" for="HasParking">Parking Disponible</label>
                    </div>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="HasWifi" name="HasWifi" value="true" {{if .restaurant.HasWifi}}checked{{end}}>
                        <label class="form-check-label" for="HasWifi">Wi-Fi Disponible</label>
                    </div>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" role="switch" id="IsAccessible" name="IsAccessible" value="true" {{if .restaurant.IsAccessible}}checked{{end}}>
                        <label class="form-check-label" for="IsAccessible">Accès Handicapé</label>
                    </div>
                </div>
            </div>
            <div class="mt-4">
                <button type="submit" class="btn btn-primary">Enregistrer les Modifications</button>
                <a href="/admin/restaurants" class="btn btn-secondary">Annuler</a>
            </div>
        </form>
    </div>
</div>

<div class="card mb-4">
    <div class="card-header">
        Périodes de Service
    </div>
    <div class="card-body">
        <form action="/admin/restaurants/{{ .restaurant.ID }}/service-periods" method="post" class="row g-3 align-items-end">
            <div class="col-md-4">
                <label for="periodName" class="form-label">Nom (ex: Déjeuner)</label>
                <input type="text" id="periodName" name="Name" class="form-control" required>
            </div>
            <div class="col-md-3">
                <label for="openingTime" class="form-label">Heure d'Ouverture</label>
                <input type="time" id="openingTime" name="OpeningTime" class="form-control" required>
            </div>
            <div class="col-md-3">
                <label for="closingTime" class="form-label">Heure de Fermeture</label>
                <input type="time" id="closingTime" name="ClosingTime" class="form-control" required>
            </div>
            <div class="col-md-2">
                <button type="submit" class="btn btn-primary w-100">Ajouter</button>
            </div>
        </form>
        <hr>
        <h5 class="h6">Périodes Existantes</h5>
        <ul class="list-group">
            {{range .restaurant.ServicePeriods}}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                {{.Name}}: {{.OpeningTime}} - {{.ClosingTime}}
                <form action="/admin/service-periods/delete/{{.ID}}?restaurant_id={{$.restaurant.ID}}" method="post" onsubmit="return confirm('Sûr ?');">
                    <button type="submit" class="btn btn-danger btn-sm">Supprimer</button>
                </form>
            </li>
            {{else}}
            <li class="list-group-item">Aucune période de service définie.</li>
            {{end}}
        </ul>
    </div>
</div>

<div class="text-center">
    <a href="/admin/restaurants" class="btn btn-outline-secondary">Retour à la liste des restaurants</a>
</div>

{{end}}

{{template "layout.html" .}}
